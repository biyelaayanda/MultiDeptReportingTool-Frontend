<div class="staff-dashboard">
  <!-- Modern Welcome Header -->
  <div class="welcome-header">
    <!-- Background Animation Elements -->
    <div class="header-bg-animation">
      <div class="floating-orb orb-1"></div>
      <div class="floating-orb orb-2"></div>
      <div class="floating-orb orb-3"></div>
    </div>
    
    <!-- Header Content -->
    <div class="header-content">
      <div class="welcome-section">
        <div class="greeting-section">
          <div class="user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="greeting-content">
            <h1 class="welcome-title">
              {{ getGreeting() }}, {{ dashboardData?.userInfo?.firstName || currentUser?.username || 'Team Member' }}!
              <span class="wave-emoji">ðŸ‘‹</span>
            </h1>
            <p class="welcome-subtitle">
              <i class="fas fa-calendar-alt me-2"></i>
              {{ currentTime | date:'EEEE, MMMM d, y' }} â€¢ {{ currentTime | date:'h:mm a' }}
            </p>
            <p class="department-info">
              <i class="fas fa-building me-2"></i>
              {{ dashboardData?.userInfo?.department || currentUser?.department || 'Your Department' }} Team Member
            </p>
          </div>
        </div>
        
        <!-- Daily Tip -->
        <div class="daily-tip">
          <div class="tip-icon">
            <i class="fas fa-lightbulb"></i>
          </div>
          <div class="tip-content">
            <span class="tip-label">Daily Tip</span>
            <p class="tip-text">{{ dailyTip }}</p>
          </div>
        </div>
      </div>
      
      <!-- Quick Stats -->
      <div class="quick-stats">
        <div class="stat-item">
          <div class="stat-value">{{ staffStats.completionRate | number:'1.1-1' }}%</div>
          <div class="stat-label">Completion Rate</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ staffStats.thisMonthSubmissions }}</div>
          <div class="stat-label">This Month</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">{{ staffStats.pendingReports }}</div>
          <div class="stat-label">Pending</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <div class="error-card">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="error-content">
        <h3>Oops! Something went wrong</h3>
        <p>{{ error }}</p>
        <button class="retry-btn" (click)="retryLoad()">
          <i class="fas fa-redo"></i>
          Try Again
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading your dashboard...</p>
    </div>
  </div>

  <!-- Main Dashboard Content -->
  <div *ngIf="!isLoading" class="dashboard-content">
    
    <!-- Quick Actions Section -->
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-bolt me-2"></i>
          Quick Actions
        </h2>
        <p class="section-subtitle">Get things done quickly and efficiently</p>
      </div>
      
      <div class="quick-actions-grid">
        <button *ngFor="let action of quickActions" 
                class="action-card" 
                [class]="'action-' + action.color"
                (click)="executeQuickAction(action)"
                type="button">
          <div class="action-icon">
            <i [class]="action.icon"></i>
          </div>
          <div class="action-content">
            <h3 class="action-title">{{ action.title }}</h3>
            <p class="action-description">{{ action.description }}</p>
          </div>
          <div class="action-arrow">
            <i class="fas fa-chevron-right"></i>
          </div>
        </button>
      </div>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
      
      <!-- Personal Stats Card -->
      <div class="dashboard-card stats-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-chart-bar me-2"></i>
            My Performance
          </h3>
          <button class="refresh-btn" (click)="refreshDashboard()" [disabled]="isLoading">
            <i class="fas fa-sync-alt" [class.fa-spin]="isLoading"></i>
          </button>
        </div>
        <div class="card-body">
          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-number primary">{{ staffStats.totalReports }}</div>
              <div class="stat-label">Total Reports</div>
              <div class="stat-trend positive">
                <i class="fas fa-arrow-up"></i>
                <span>{{ staffStats.totalReports > 0 ? '+' + ((staffStats.completedReports / staffStats.totalReports) * 100 | number:'1.0-0') + '%' : 'N/A' }}</span>
              </div>
            </div>
            <div class="stat-box">
              <div class="stat-number success">{{ staffStats.completedReports }}</div>
              <div class="stat-label">Completed</div>
              <div class="stat-trend positive">
                <i class="fas fa-check"></i>
                <span>{{ staffStats.completionRate | number:'1.1-1' }}%</span>
              </div>
            </div>
            <div class="stat-box">
              <div class="stat-number warning">{{ staffStats.pendingReports }}</div>
              <div class="stat-label">Pending</div>
              <div class="stat-trend" [class]="staffStats.pendingReports > 5 ? 'negative' : 'neutral'">
                <i class="fas fa-clock"></i>
                <span>{{ staffStats.pendingReports > 0 ? 'Due Soon' : 'All Clear' }}</span>
              </div>
            </div>
            <div class="stat-box">
              <div class="stat-number info">{{ staffStats.thisMonthSubmissions }}</div>
              <div class="stat-label">This Month</div>
              <div class="stat-trend positive">
                <i class="fas fa-calendar"></i>
                <span>Target: {{ departmentGoals.monthlyTarget }}</span>
              </div>
            </div>
          </div>
          
          <!-- Progress Bar -->
          <div class="progress-section">
            <div class="progress-header">
              <span class="progress-label">Monthly Goal Progress</span>
              <span class="progress-value">{{ staffStats.thisMonthSubmissions }}/{{ departmentGoals.monthlyTarget }}</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" 
                   [style.width.%]="departmentGoals.monthlyTarget > 0 ? (staffStats.thisMonthSubmissions / departmentGoals.monthlyTarget) * 100 : 0"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications Card -->
      <div class="dashboard-card notifications-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-bell me-2"></i>
            Notifications
            <span class="notification-badge" *ngIf="getUnreadNotificationsCount() > 0">
              {{ getUnreadNotificationsCount() }}
            </span>
          </h3>
        </div>
        <div class="card-body">
          <div class="notifications-list">
            <div *ngIf="notifications.length === 0" class="empty-state">
              <i class="fas fa-check-circle text-success"></i>
              <p>You're all caught up!</p>
            </div>
            
            <button *ngFor="let notification of notifications.slice(0, 5)" 
                    class="notification-item"
                    [class.unread]="!notification.isRead"
                    (click)="markNotificationAsRead(notification)"
                    type="button">
              <div class="notification-icon">
                <i [class]="getNotificationIcon(notification.type)"></i>
              </div>
              <div class="notification-content">
                <h4 class="notification-title">{{ notification.title }}</h4>
                <p class="notification-message">{{ notification.message }}</p>
                <span class="notification-time">{{ notification.timestamp | date:'short' }}</span>
              </div>
              <button class="dismiss-btn" (click)="dismissNotification(notification.id); $event.stopPropagation()" type="button">
                <i class="fas fa-times"></i>
              </button>
            </button>
          </div>
        </div>
      </div>

      <!-- Recent Activity Card -->
      <div class="dashboard-card activity-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-history me-2"></i>
            Recent Activity
          </h3>
        </div>
        <div class="card-body">
          <div class="activity-timeline">
            <div *ngFor="let activity of recentActivities.slice(0, 4)" class="activity-item">
              <div class="activity-icon">
                <i [class]="getActivityIcon(activity.type)"></i>
              </div>
              <div class="activity-content">
                <h4 class="activity-action">{{ activity.action }}</h4>
                <p class="activity-details">{{ activity.details }}</p>
                <span class="activity-time">{{ activity.timestamp | date:'short' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Links Card -->
      <div class="dashboard-card quick-links-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-external-link-alt me-2"></i>
            Quick Links
          </h3>
        </div>
        <div class="card-body">
          <div class="quick-links-grid">
            <a href="#" class="quick-link">
              <i class="fas fa-book"></i>
              <span>Report Templates</span>
            </a>
            <a href="#" class="quick-link">
              <i class="fas fa-question-circle"></i>
              <span>Help Center</span>
            </a>
            <a href="#" class="quick-link">
              <i class="fas fa-calendar"></i>
              <span>Calendar</span>
            </a>
            <a href="#" class="quick-link">
              <i class="fas fa-cog"></i>
              <span>Settings</span>
            </a>
            <a href="#" class="quick-link">
              <i class="fas fa-comments"></i>
              <span>Feedback</span>
            </a>
            <a href="#" class="quick-link">
              <i class="fas fa-download"></i>
              <span>Downloads</span>
            </a>
          </div>
        </div>
      </div>

    </div>

    <!-- Motivational Section -->
    <div class="motivation-section">
      <div class="motivation-card">
        <div class="motivation-content">
          <div class="motivation-icon">
            <i class="fas fa-star"></i>
          </div>
          <div class="motivation-text">
            <h3>Keep up the great work!</h3>
            <p>You're doing amazing. Every report you submit helps drive our success forward.</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
