{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction RegisterComponent_option_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const dept_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", dept_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", dept_r2, \" \");\n  }\n}\nfunction RegisterComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.error);\n  }\n}\nfunction RegisterComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 30);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.success);\n  }\n}\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.registerForm = {\n        username: '',\n        email: '',\n        password: '',\n        role: '',\n        department: ''\n      };\n      this.confirmPassword = '';\n      this.isLoading = false;\n      this.error = '';\n      this.success = '';\n      // Department options based on role\n      this.departmentOptions = {\n        'admin': ['IT', 'Management', 'Operations'],\n        'department-lead': ['Sales', 'Marketing', 'Operations', 'Finance', 'HR'],\n        'executive': ['Management', 'Strategy', 'Operations'],\n        'staff': ['Sales', 'Marketing', 'Operations', 'Finance', 'HR', 'IT', 'Support']\n      };\n    }\n    ngOnInit() {\n      // If already authenticated, redirect to appropriate dashboard\n      if (this.authService.isAuthenticated()) {\n        this.redirectToRoleDashboard(this.authService.getUserRole());\n      }\n    }\n    onRoleChange() {\n      // Reset department when role changes\n      this.registerForm.department = '';\n    }\n    getDepartmentOptions() {\n      return this.departmentOptions[this.registerForm.role] || [];\n    }\n    onSubmit() {\n      this.error = '';\n      this.success = '';\n      // Validation\n      if (!this.registerForm.username || !this.registerForm.email || !this.registerForm.password || !this.registerForm.role || !this.registerForm.department) {\n        this.error = 'Please fill in all fields';\n        return;\n      }\n      if (this.registerForm.password !== this.confirmPassword) {\n        this.error = 'Passwords do not match';\n        return;\n      }\n      if (this.registerForm.password.length < 6) {\n        this.error = 'Password must be at least 6 characters long';\n        return;\n      }\n      if (!this.isValidEmail(this.registerForm.email)) {\n        this.error = 'Please enter a valid email address';\n        return;\n      }\n      this.isLoading = true;\n      this.authService.register(this.registerForm).subscribe({\n        next: response => {\n          this.isLoading = false;\n          this.success = 'Registration successful! You can now login with your credentials.';\n          this.resetForm();\n          // Redirect to login after 2 seconds\n          setTimeout(() => {\n            this.router.navigate(['/auth']);\n          }, 2000);\n        },\n        error: error => {\n          this.isLoading = false;\n          this.error = error.error?.message || 'Registration failed. Please try again.';\n        }\n      });\n    }\n    isValidEmail(email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(email);\n    }\n    resetForm() {\n      this.registerForm = {\n        username: '',\n        email: '',\n        password: '',\n        role: '',\n        department: ''\n      };\n      this.confirmPassword = '';\n    }\n    redirectToRoleDashboard(role) {\n      switch (role) {\n        case 'admin':\n          this.router.navigate(['/dashboard']);\n          break;\n        case 'department-lead':\n          this.router.navigate(['/department-lead']);\n          break;\n        case 'executive':\n          this.router.navigate(['/executive']);\n          break;\n        case 'staff':\n          this.router.navigate(['/staff-user']);\n          break;\n        default:\n          this.router.navigate(['/dashboard']);\n      }\n    }\n    goToLogin() {\n      this.router.navigate(['/auth']);\n    }\n    static {\n      this.ɵfac = function RegisterComponent_Factory(t) {\n        return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegisterComponent,\n        selectors: [[\"app-register\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 57,\n        vars: 12,\n        consts: [[\"registerFormRef\", \"ngForm\"], [1, \"register-container\"], [1, \"register-card\"], [1, \"register-form\", 3, \"ngSubmit\"], [1, \"form-row\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"required\", \"\", \"placeholder\", \"Enter your username\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", \"placeholder\", \"Enter your email\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Enter your password\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"confirmPassword\"], [\"type\", \"password\", \"id\", \"confirmPassword\", \"name\", \"confirmPassword\", \"required\", \"\", \"placeholder\", \"Confirm your password\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"role\"], [\"id\", \"role\", \"name\", \"role\", \"required\", \"\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"admin\"], [\"value\", \"department-lead\"], [\"value\", \"executive\"], [\"value\", \"staff\"], [\"for\", \"department\"], [\"id\", \"department\", \"name\", \"department\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"register-btn\", 3, \"disabled\"], [1, \"login-link\"], [\"type\", \"button\", 1, \"link-btn\", 3, \"click\"], [3, \"value\"], [1, \"error-message\"], [1, \"success-message\"]],\n        template: function RegisterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h2\");\n            i0.ɵɵtext(3, \"Create Account\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\");\n            i0.ɵɵtext(5, \"Join the Multi-Department Reporting Tool\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"form\", 3, 0);\n            i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_6_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onSubmit());\n            });\n            i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"label\", 6);\n            i0.ɵɵtext(11, \"Username:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_12_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.registerForm.username, $event) || (ctx.registerForm.username = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 5)(14, \"label\", 8);\n            i0.ɵɵtext(15, \"Email:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_16_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.registerForm.email, $event) || (ctx.registerForm.email = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 4)(18, \"div\", 5)(19, \"label\", 10);\n            i0.ɵɵtext(20, \"Password:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"input\", 11);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_21_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.registerForm.password, $event) || (ctx.registerForm.password = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"div\", 5)(23, \"label\", 12);\n            i0.ɵɵtext(24, \"Confirm Password:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"input\", 13);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_25_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.confirmPassword, $event) || (ctx.confirmPassword = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(26, \"div\", 4)(27, \"div\", 5)(28, \"label\", 14);\n            i0.ɵɵtext(29, \"Role:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"select\", 15);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_select_ngModelChange_30_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.registerForm.role, $event) || (ctx.registerForm.role = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵlistener(\"change\", function RegisterComponent_Template_select_change_30_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onRoleChange());\n            });\n            i0.ɵɵelementStart(31, \"option\", 16);\n            i0.ɵɵtext(32, \"Select your role\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"option\", 17);\n            i0.ɵɵtext(34, \"Admin\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"option\", 18);\n            i0.ɵɵtext(36, \"Department Lead\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(37, \"option\", 19);\n            i0.ɵɵtext(38, \"Executive\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"option\", 20);\n            i0.ɵɵtext(40, \"Staff User\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(41, \"div\", 5)(42, \"label\", 21);\n            i0.ɵɵtext(43, \"Department:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"select\", 22);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Template_select_ngModelChange_44_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.registerForm.department, $event) || (ctx.registerForm.department = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementStart(45, \"option\", 16);\n            i0.ɵɵtext(46, \"Select department\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(47, RegisterComponent_option_47_Template, 2, 2, \"option\", 23);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(48, RegisterComponent_div_48_Template, 3, 1, \"div\", 24)(49, RegisterComponent_div_49_Template, 3, 1, \"div\", 24);\n            i0.ɵɵelementStart(50, \"button\", 25);\n            i0.ɵɵtext(51);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(52, \"div\", 26)(53, \"p\");\n            i0.ɵɵtext(54, \"Already have an account? \");\n            i0.ɵɵelementStart(55, \"button\", 27);\n            i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_55_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.goToLogin());\n            });\n            i0.ɵɵtext(56, \" Sign in here \");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            const registerFormRef_r4 = i0.ɵɵreference(7);\n            i0.ɵɵadvance(12);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.registerForm.username);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.registerForm.email);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.registerForm.password);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.confirmPassword);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.registerForm.role);\n            i0.ɵɵadvance(14);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.registerForm.department);\n            i0.ɵɵproperty(\"disabled\", !ctx.registerForm.role);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.getDepartmentOptions());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.success);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading || !registerFormRef_r4.form.valid);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Creating Account...\" : \"Create Account\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n        styles: [\".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:90vh;padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2)}.register-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:2.5rem;width:100%;max-width:600px;text-align:center}.register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:.5rem;font-size:2rem;font-weight:600}.register-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:2rem;font-size:1.1rem}.register-form[_ngcontent-%COMP%]{text-align:left}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50;font-weight:500;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.875rem;border:2px solid #e0e6ed;border-radius:8px;font-size:1rem;box-sizing:border-box;transition:all .3s ease;background-color:#f8f9fa}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a;background-color:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{background-color:#f5f6fa;color:#95a5a6;cursor:not-allowed}.register-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:1rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;margin-top:1.5rem;transition:all .3s ease;box-shadow:0 4px 15px #3498db33}.register-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2980b9,#1f4e79);transform:translateY(-2px);box-shadow:0 6px 20px #3498db4d}.register-btn[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#95a5a6,#7f8c8d);cursor:not-allowed;transform:none;box-shadow:none}.error-message[_ngcontent-%COMP%]{color:#e74c3c;background-color:#fadbd8;padding:.875rem;border-radius:8px;border:1px solid #f1948a;font-size:.95rem;margin-top:1rem}.success-message[_ngcontent-%COMP%]{color:#27ae60;background-color:#d5f4e6;padding:.875rem;border-radius:8px;border:1px solid #7dcea0;font-size:.95rem;margin-top:1rem}.login-link[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e0e6ed}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:.95rem}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#3498db;cursor:pointer;text-decoration:underline;font-size:.95rem;font-weight:500;transition:color .3s ease}.link-btn[_ngcontent-%COMP%]:hover{color:#2980b9}.register-btn[_ngcontent-%COMP%]:disabled:after{content:\\\"\\\";display:inline-block;width:16px;height:16px;margin-left:8px;border:2px solid #ffffff;border-radius:50%;border-top-color:transparent;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}\"]\n      });\n    }\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}